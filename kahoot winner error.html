<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" as="style" onload="this.rel = 'stylesheet'">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Kahoot Winner is down.</title>
  </head>
  <body class="red">
    <style media="screen">
      body{
        font-family: 'Montserrat', sans-serif;
        text-align: center;
        color: white;
        margin: 0;
      }
      h1{
        color: white;
      }
      marquee{
        height: 5rem;
        text-align: center;
      }
      .red{
        background: #c60929;
      }
      .green{
        background: #106b03;
      }
      .play{
        background: #ffdd33;
        color: #333333;
      }
      .container{
        background: rgba(0,0,0,0.3);
      }
      a{
        color: white;
      }
      footer{
        margin-top: 0.5rem;
        background: rgba(0,0,0,0.7);
        padding: 0.5rem;
      }
    </style>
    <div class="container">
      <h1>Kawhoops! Something went wrong!</h1>
      <p>If you are seeing this page, that means that Kahoot Winner is down or is under maintenance. This is most likely an issue with the server being overloaded and running out of memory, but it could be another issue. The server should come back online in a few minutes.</p>
      <p>In the meantime, just wait or play the small minigame below and when the server goes up, you should be redirected back to Kahoot Winner.</p>
      <p>You may also download the application from here: <a href="https://archive.org/details/kahoot-win">https://archive.org/details/kahoot-win</a>.</p>
      <p>You can also see alternate Kahoot sites here: <a href="https://kahoot.js.org/websites">kahoot.js.org/websites</a></p>
      <noscript>
        On second thought, you might have to do that yourself because you aren't allowing javascript on this page.
      </noscript>
      <p>Current state: <span id="status" class="red">DOWN</span></p>
      <marquee direction="down" really="yes, really, I know this tag is deprecated but who cares, text go brrrrrrrrr">Checking status of kahoot-win</marquee>
      <h3>Feel free to join the <a href="https://discord.gg/58SHzC2" target="_blank">Discord server</a> to discuss issues as well.</h3>
    </div>
    <script type="text/javascript">
      let url = location.hostname === "kahoot-win.herokuapp.com" ? "/up" : "https://kahoot-win.herokuapp.com/up";
      function check(t){
        if(location.href.includes("?play") || location.href.includes("&play")){
          document.getElementById("status").className = "play";
          document.getElementById("status").innerHTML = "SchrÃ¶dinger's Status (Playing)";
          return;
        }
        const x = new XMLHttpRequest();
        x.open("GET",url);
        x.send();
        x.onerror = x.ontimeout = function(){
          t *= 2;
          if(t > 30){
            t = 30;
          }
          setTimeout(function(){
            check(t);
          },t * 1000);
        };
        x.onload = function(){
          if(x.status != 200 || !/^-?\d+ (hours|minutes) until expected reset.*/m.test(x.response)){
            return x.onerror(t);
          }
          document.getElementById("status").className = "green";
          document.body.className = "green";
          document.getElementById("status").innerHTML = "UP! Redirecting...";
          setTimeout(()=>{
            if(url == "/up"){
              location.reload();
            }else{
              location.href = "https://kahoot-win.herokuapp.com";
            }
          },2000);
        }
      }
      check(0.5);
    </script>
    <script src="Misc/audiosynth.js"></script>
    <!-- Simon Says Game. -->
    <div>
      <div class="simon">
        <button id="r"></button>
        <button id="b"></button>
        <button id="y"></button>
        <button id="g"></button>
      </div>
      <button id="start">Start</button>
    </div>
    <style>
      .simon{
        margin: auto;
        display: flex;
        width: 15rem;
        height: 15rem;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
      }
      .simon > button{
        flex: 50%;
        border: 0.25rem solid black;
        appearance: none;
      }
      .simon > button:active{
        opacity: 0.8;
      }
      #r{
        background: #e21b3c;
      }
      #b{
        background: #1368ce;
      }
      #y{
        background: #ffa602;
      }
      #g{
        background: #26890c;
      }
    </style>
    <script>
      function mobileCheck(){
        let check = false;
        (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
        return check;
      }
      const startButton = document.getElementById("start");
      const piano = Synth.createInstrument(0);
      piano._parent.setSampleRate(mobileCheck() ? 4000 : 22500); // 22500
      const gameInfo = {
        started: false,
        steps: [],
        score: 0,
        song: 0,
        answerStep: 0,
        waitingAnswer: false
      };
      const IDS = ["r","b","y","g"];
      for(let i in IDS){
        const b = document.getElementById(IDS[i]);
        const j = IDS[i];
        b.addEventListener("click",()=>{
          pressGame(j);
        });
      }
      const KEYS = [
        ["C",2],
        ["D",2],
        ["E",2],
        ["F",2],
        ["G",2],
        ["A",2],
        ["B",2],
        ["C",3],
        ["D",3],
        ["E",3],
        ["F",3],
        ["G",3],
        ["A",3],
        ["B",3],
        ["C",4],
        ["D",4],
        ["E",4],
        ["F",4],
        ["G",4],
        ["A",4],
        ["B",4],
        ["C",5],
        ["D",5],
        ["E",5],
        ["F",5],
        ["G",5],
        ["A",5],
        ["B",5]
      ];
      const REST = ["C",0];
      let i = 0;
      const songs = [
        Array.from({length: 100}, () => {
          return KEYS[Math.floor(Math.random() * KEYS.length)];
        }),
        Array.from({length:15},()=>{
          return KEYS[i++];
        }),
        [
          // start 1
          ["C",2],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["C",3],
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["G",2,1],
          ["B",2],
          ["C",3,1],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          REST,
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["D",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["D",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4],["G",2]],
          ["D#",2,1],
          ["D",2,1],
          ["C",2],
          [["D#",4],["C",4]],
          [["D#",4],["C",4]],
          REST,
          // end 1, start 2
          ["C",2],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["C",3],
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["G",2,1],
          ["B",2],
          ["C",3,1],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          REST,
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["D",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["D",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4],["G",2]],
          ["D#",2,1],
          ["D",2,1],
          ["C",2],
          [["D#",4],["C",4]],
          [["D#",4],["C",4]],
          // end 2, start 3 [new]
          ["E",3],
          ["E",3],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["C",3],
          ["C",3],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          REST,
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          REST,
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["F",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["F",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["G",2,1],
          ["D#",2],
          ["D",2],
          [["C",2],["D#",4],["C",4]],
          ["C",0,1],
          [["D#",4],["C",4]],
          // end 3, start 4
          ["E",3],
          ["E",3],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["C",3],
          ["C",3],
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          REST,
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          REST,
          REST,
          [["D#",4],["G",4]],
          [["D#",4],["G",4]],
          ["F",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["F",2],
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["G",2,1],
          ["D#",2],
          ["D",2],
          [["C",2],["D#",4],["C",4]],
          ["C",0,1],
          [["D#",4],["C",4]],
          // end 4, start 5 [new 2]
          ["C",4],
          ["C",4],
          ["F",4],
          ["F",4],
          ["G#",4],
          ["G#",4],
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["G",4],
          ["G",4],
          ["D",4],
          ["D",4],
          ["D#",4],
          ["D#",4],
          [["C",4],["D#",4]],
          [["C",4],["D#",4]],
          REST,REST,
          [["C",4],["D#",4]],
          [["C",4],["D#",4]],
          REST,REST,
          [["C",4],["D#",4]],
          [["C",4],["D#",4]],
          // end 5, start 6
          ["C",4],
          ["C",4],
          ["F",4],
          ["F",4],
          ["G#",4],
          ["G#",4],
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          REST,
          REST,
          [["C",4],["F",4]],
          [["C",4],["F",4]],
          ["G",4],
          ["G",4],
          ["D",4],
          ["D",4],
          ["D#",4],
          ["D#",4],
          [["C",4],["D#",4]],
          [["C",4],["D#",4]],
          REST,REST,
          [["C",4],["D#",4]],
          [["C",4],["D#",4]],
          REST,REST,
          [["C",4],["D#",4]],
          [["C",4],["D#",4]],
          // end 6, start 7 [end]
          ["C",5],
          ["C",5],
          ["A#",4],
          ["A#",4],
          ["G#",4],
          ["G#",4],
          [["G#",3],["D#",4]],
          [["G#",3],["D#",4]],
          REST,REST,
          [["G#",3],["D#",4]],
          [["G#",3],["D#",4]],
          REST,REST,
          [["G#",3],["D#",4]],
          [["G#",3],["D#",4]],
          ["G",4],
          ["G",4],
          ["F",4],
          ["F",4],
          ["D#",4],
          ["D#",4],
          [["G",3],["C",4]],
          [["G",3],["C",4]],
          REST,REST,
          [["G",3],["C",4]],
          [["G",3],["C",4]],
          REST,REST,
          [["G",3],["C",4]],
          [["G",3],["C",4]],
          // end 7 start 8 (finale!)
          ["C",5],
          ["C",5],
          ["A#",4],
          ["A#",4],
          ["G#",4],
          ["G#",4],
          [["G#",3],["D#",4]],
          [["G#",3],["D#",4]],
          REST,REST,
          [["G#",3],["D#",4]],
          [["G#",3],["D#",4]],
          REST,REST,
          [["G#",3],["D#",4]],
          [["G#",3],["D#",4]],
          ["G",4],
          ["G",4],
          ["F",4],
          ["F",4],
          ["D#",4],
          ["D#",4],
          [["G",3],["C",4]],
          [["G",3],["C",4]],
          REST,REST,
          [["G",3],["C",4]],
          [["G",3],["C",4]],
          REST,REST,
          [["G",3],["C",4]],
          [["G",3],["C",4]]
          // done!
        ]
      ];
      function wait(n){return new Promise((res)=>{setTimeout(res,n * 1000)});};
      async function playList(li,n,ignore){
        ignore && console.log(li)
        for(let i = 0;i<li.length;i++){
          if(typeof li[i][0] === "string"){
            piano.play(...li[i]);
          }else{
            for(let j in li[i]){
              piano.play(...li[i][j]);
            }
          }
          try{
            if(ignore){throw "no need";}
            const button = document.getElementById(gameInfo.steps[n++]);
            button.style.background = "black";
            setTimeout(()=>{
              button.style.background = "";
            },100);
          }catch(e){}
          if(!ignore && typeof gameInfo.steps[n] != "string"){
            break;
          }
          await wait(li[i][2] && 0.125 || 0.25);
        }
        if(!ignore && gameInfo.steps.length && gameInfo.steps.length > n){
          await playList(li,n);
        }
        if(gameInfo.started && !ignore){
          gameInfo.waitingAnswer = true;
        }
      };
      async function pressGame(id){
        if(!gameInfo.waitingAnswer){
          return;
        }
        const f = gameInfo.answerStep % songs[gameInfo.song].length;
        playList(songs[gameInfo.song].slice(f,f + 1),0,true);
        if(gameInfo.steps[gameInfo.answerStep++] === id){
          // continue!
          if(gameInfo.answerStep === gameInfo.steps.length){
            gameInfo.score++;
            gameInfo.answerStep = 0;
            gameInfo.waitingAnswer = false;
            setTimeout(()=>{
              addGame();
            },1000);
          }
        }else{
          // fail. game over.
          alert("Game over! Score: " + gameInfo.score);
          resetGame();
        }
      }
      function addGame(){
        gameInfo.steps.push(IDS[Math.floor(Math.random() * 4)]);
        playList(songs[gameInfo.song].slice(0,gameInfo.steps.length),0);
      }
      function resetGame(){
        gameInfo.steps = [];
        gameInfo.started = false;
        gameInfo.waitingAnswer = false;
        gameInfo.score = 0;
        gameInfo.answerStep = 0;
      }
      startButton.addEventListener("click",()=>{
        if(gameInfo.started){
          return;
        }
        gameInfo.started = true;
        gameInfo.song = Math.floor(Math.random() * songs.length);
        addGame();
      });
    </script>
    <footer>&copy; 2020 theusaf</footer>
  </body>
</html>
